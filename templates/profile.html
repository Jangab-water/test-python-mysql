{% extends "base.html" %}

{% block title %}내 프로필 - 게시판 서비스{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <h1>내 프로필</h1>
    </div>

    <div class="profile-info">
        <div class="info-card">
            <h2>사용자 정보</h2>
            <dl>
                <dt>사용자 이름</dt>
                <dd>
                    {{ user.username }}
                    {% if is_admin %}
                        <span class="badge badge-admin">ADMIN</span>
                    {% endif %}
                </dd>

                <dt>가입일</dt>
                <dd>{{ user.created_at.strftime('%Y-%m-%d') }}</dd>

                <dt>작성한 게시글 수</dt>
                <dd>{{ total_posts }}개</dd>
            </dl>
        </div>
    </div>

    <div class="profile-posts">
        <h2>내가 작성한 게시글</h2>

        {% if user_posts %}
        <div class="posts-list">
            {% for post in user_posts %}
            <div class="post-card {% if post.is_deleted %}post-deleted{% endif %}">
                <h3>
                    <a href="/posts/{{ post.id }}">{{ post.title }}</a>
                    {% if post.is_deleted %}
                        <span class="badge badge-danger">삭제됨</span>
                    {% endif %}
                </h3>
                <div class="post-footer">
                    <span class="post-date">{{ post.created_at.strftime('%Y-%m-%d %H:%M') }}</span>
                    <div class="post-actions-inline">
                        <a href="/posts/{{ post.id }}/edit" class="btn-small">수정</a>
                        {% if not post.is_deleted %}
                            <form method="post" action="/posts/{{ post.id }}/delete" style="display: inline;">
                                <button type="submit" class="btn-small btn-danger" onclick="return confirm('정말 삭제하시겠습니까?')">
                                    삭제
                                </button>
                            </form>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <p>작성한 게시글이 없습니다.</p>
            <a href="/posts/new" class="btn btn-primary">첫 게시글 작성하기</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
